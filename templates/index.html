<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Main Page</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/main-container.css') }}">

</head>
<body>

  <div id="main-container">
    <!-- Content will go here -->
    <!-- ðŸŒ¿ Welcome Container: holds the poetic greeting -->
<div class="welcome-container">

  <!-- ðŸŒŸ Poetic Welcome Block -->
  <div class="welcome-section text-center">
    <h1 class="altar-title">ðŸŒ¿ Welcome to the {{ title }}</h1>
    <p class="altar-blessing">
      {{ song_count }} songs robed.<br>
      From Blantyre to Neno, joy echoes through the altar.<br>
      You are invited to witness, offer, and sing.
    </p>
  </div>

</div>

 <!-- ðŸ” Search Form Container â€” handles search input only -->
<div class="search-form-container">

  <!-- ðŸ” Search Form â€” sends query to the shrine -->
  <form action="{{ url_for('index') }}"
        method="get"
        class="d-flex justify-content-center mb-3"
        onsubmit="return validateSearch()">

    <!-- ðŸŒ¿ Input field â€” where the seeker types the scroll name -->
    <input id="searchInput"
           class="form-control form-control-sm w-50 me-2"
           type="search"
           name="q"
           placeholder="Search scroll..."
           aria-label="Search"
           required>

    <!-- âœ¨ Submit button â€” sends the offering to the shrine -->
    <button class="btn btn-sm btn-outline-primary" type="submit">Search</button>
  </form>

  <!-- ðŸŒ¿ Validation Script â€” blocks empty or whitespace-only searches -->
  <script>
    function validateSearch() {
      const input = document.getElementById('searchInput').value.trim();
      if (input.length === 0) {
        alert("ðŸ›‘ Please enter a phrase to search.");
        return false;
      }
      return true;
    }
  </script>

  <!-- ðŸ” Search Query Heading â€” shows what was searched -->
  {% if query|length > 0 %}
    <h6 class="text-muted mb-3">Search Results for "{{ query }}"</h6>
  {% endif %}

  <!-- ðŸ›‘ Warning if No Scroll Found â€” gentle message if nothing matches -->
  {% if query|length > 0 and selected_song is none %}
    <div class="alert alert-warning text-center" role="alert">
      ðŸ›‘ No scroll found matching "{{ query }}". Try another phrase.
    </div>
  {% endif %}

</div>


<!-- ðŸŽ§ Playback Cover Container â€” shows scroll only if found -->
{% if selected_song %}
  <div class="playback-cover-container">

    <!-- ðŸŽ´ Playback Card -->
    <div id="scroll-display" class="card mx-auto mt-3">
      <!-- ðŸ–¼ï¸ Cover image â€” linked to the music file name -->
      <div class="cover-container">
        <img src="{{ url_for('static', filename='covers/' + selected_song.music_file.replace('.mp3', '.png')) }}"
             alt="Cover for {{ selected_song.title }}"
             class="cover-fill">
      </div>

      <!-- ðŸŽ¶ Title and audio player -->
      <div class="p-3 text-center">
        <p class="mb-2"><strong>{{ selected_song.title }}</strong></p>
        <audio controls class="w-100">
          <source src="{{ url_for('static', filename='music/' + selected_song.music_file) }}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      </div>
    </div>

  </div>
{% endif %}

  </div>

</body>
</html>

